{"version":3,"file":"index.js","sources":["../src/jwt/index.ts","../src/hooks/index.tsx"],"sourcesContent":["export function decodeToken(token: string) {\n  try {\n    // if the token has more or less than 3 parts or is not a string\n    // then is not a valid token\n    if (token.split(\".\").length !== 3 || typeof token !== \"string\") {\n      return null;\n    } else {\n      // payload ( index 1 ) has the data stored and\n      // data about the expiration time\n      const payload: string = token.split(\".\")[1];\n      // handle unicode parsing issues between atob and JWT base64 format\n      const base64: string = payload.replace(\"-\", \"+\").replace(\"_\", \"/\");\n      // decode and parse to json\n      const decoded = JSON.parse(atob(base64));\n      return decoded;\n    }\n  } catch (error) {\n    // Return null if something goes wrong\n    return null;\n  }\n}\n\nexport function isTokenExpired(token: string) {\n  const decodedToken: any = decodeToken(token);\n  let result: boolean = true;\n\n  if (decodedToken && decodedToken.exp) {\n    const expirationDate: Date = new Date(0);\n    expirationDate.setUTCSeconds(decodedToken.exp); // sets the expiration seconds\n    // compare the expiration time and the current time\n    result = expirationDate.valueOf() < new Date().valueOf();\n  } else {\n    result = true;\n  }\n\n  return result;\n}\n","import { useState, useEffect } from \"react\";\nimport { decodeToken, isTokenExpired } from \"../jwt\";\n\nexport function useJwt(token: string) {\n  const [isExpired, setIsExpired] = useState(false);\n  const [decodedToken, setDecodedToken] = useState<any>(null);\n\n  useEffect(() => {\n    setDecodedToken(decodeToken(token));\n    setIsExpired(isTokenExpired(token));\n  }, [token]);\n\n  return { isExpired, decodedToken };\n}\n"],"names":["decodeToken","token","split","length","payload","base64","replace","decoded","JSON","parse","atob","error","isTokenExpired","decodedToken","result","exp","expirationDate","Date","setUTCSeconds","valueOf","useJwt","useState","isExpired","setIsExpired","setDecodedToken","useEffect"],"mappings":";;SAAgBA,YAAYC;AAC1B,MAAI;AAGF,QAAIA,KAAK,CAACC,KAAN,CAAY,GAAZ,EAAiBC,MAAjB,KAA4B,CAA5B,IAAiC,OAAOF,KAAP,KAAiB,QAAtD,EAAgE;AAC9D,aAAO,IAAP;AACD,KAFD,MAEO;AAGL,UAAMG,OAAO,GAAWH,KAAK,CAACC,KAAN,CAAY,GAAZ,EAAiB,CAAjB,CAAxB;AAEA,UAAMG,MAAM,GAAWD,OAAO,CAACE,OAAR,CAAgB,GAAhB,EAAqB,GAArB,EAA0BA,OAA1B,CAAkC,GAAlC,EAAuC,GAAvC,CAAvB;AAEA,UAAMC,OAAO,GAAGC,IAAI,CAACC,KAAL,CAAWC,IAAI,CAACL,MAAD,CAAf,CAAhB;AACA,aAAOE,OAAP;AACD;AACF,GAfD,CAeE,OAAOI,KAAP,EAAc;AAEd,WAAO,IAAP;AACD;AACF;SAEeC,eAAeX;AAC7B,MAAMY,YAAY,GAAQb,WAAW,CAACC,KAAD,CAArC;AACA,MAAIa,MAAM,GAAY,IAAtB;;AAEA,MAAID,YAAY,IAAIA,YAAY,CAACE,GAAjC,EAAsC;AACpC,QAAMC,cAAc,GAAS,IAAIC,IAAJ,CAAS,CAAT,CAA7B;AACAD,IAAAA,cAAc,CAACE,aAAf,CAA6BL,YAAY,CAACE,GAA1C;AAEAD,IAAAA,MAAM,GAAGE,cAAc,CAACG,OAAf,KAA2B,IAAIF,IAAJ,GAAWE,OAAX,EAApC;AACD,GALD,MAKO;AACLL,IAAAA,MAAM,GAAG,IAAT;AACD;;AAED,SAAOA,MAAP;AACD;;SCjCeM,OAAOnB;kBACaoB,cAAQ,CAAC,KAAD;MAAnCC;MAAWC;;mBACsBF,cAAQ,CAAM,IAAN;MAAzCR;MAAcW;;AAErBC,EAAAA,eAAS,CAAC;AACRD,IAAAA,eAAe,CAACxB,WAAW,CAACC,KAAD,CAAZ,CAAf;AACAsB,IAAAA,YAAY,CAACX,cAAc,CAACX,KAAD,CAAf,CAAZ;AACD,GAHQ,EAGN,CAACA,KAAD,CAHM,CAAT;AAKA,SAAO;AAAEqB,IAAAA,SAAS,EAATA,SAAF;AAAaT,IAAAA,YAAY,EAAZA;AAAb,GAAP;AACD;;;;;;"}